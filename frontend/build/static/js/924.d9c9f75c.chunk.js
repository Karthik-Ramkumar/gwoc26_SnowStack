/*! For license information please see 924.d9c9f75c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[924],{3924(e,s,a){a.r(s),a.d(s,{default:()=>v});var i=a(2555),r=a(5043),l=a(9098);const n=()=>{const[e,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[n,c]=(0,r.useState)(null),{currentUser:d,loading:t}=(0,l.A)();return(0,r.useEffect)(()=>{if(t)return;if(!d)return s([]),void i(!1);(async()=>{i(!0),c(null);try{const e=await fetch("/api/products/orders/?firebase_uid=".concat(d.uid));if(!e.ok)throw new Error("Failed to fetch order history from server");const a=await e.json(),r=(Array.isArray(a)?a:a.results||[]).map(e=>({orderId:e.order_number,id:e.id,items:e.items.map(e=>({name:e.product_name,price:e.product_price,quantity:e.quantity,image:e.product_image})),totalAmount:parseFloat(e.total_amount),status:e.status,createdAt:new Date(e.created_at),paymentMethod:e.payment_method,paymentStatus:e.payment_status}));s(r),i(!1)}catch(e){console.error("Error fetching orders from Django:",e),c(e.message),i(!1)}})()},[d,t]),{orders:e,loading:a,error:n}};var c=a(5685),d=a(9493),t=a(4459),o=a(5327),m=a(7784);const h=(0,m.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var p=a(5088);const x=(0,m.A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var u=a(7095),j=a(579);const v=function(){var e,s;const{currentUser:a,logout:m}=(0,l.A)(),{orders:v,loading:N}=n(),g=(0,c.Zp)(),[w,y]=r.useState(!1),[k,f]=r.useState(null);if(!a)return g("/login"),null;const A=null!==(e=a.metadata)&&void 0!==e&&e.creationTime?new Date(a.metadata.creationTime).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",b=null!==(s=a.metadata)&&void 0!==s&&s.lastSignInTime?new Date(a.metadata.lastSignInTime).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",S=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"delivered":return"status-delivered";case"shipped":return"status-shipped";case"processing":return"status-processing";case"cancelled":return"status-cancelled";default:return"status-pending"}},C=e=>{const s=["pending","confirmed","processing","shipped","delivered"],a=s.indexOf(null===e||void 0===e?void 0:e.toLowerCase());return[{key:"confirmed",label:"Confirmed",icon:"\u2713"},{key:"processing",label:"Processing",icon:"\u2699"},{key:"shipped",label:"Shipped",icon:"\ud83d\udce6"},{key:"delivered",label:"Delivered",icon:"\u2713"}].map((r,l)=>(0,i.A)((0,i.A)({},r),{},{isCompleted:l<a,isActive:s[a]===r.key,isCancelled:"cancelled"===(null===e||void 0===e?void 0:e.toLowerCase())}))};return(0,j.jsx)("div",{className:"profile-page-new",children:(0,j.jsxs)("div",{className:"profile-container-new",children:[(0,j.jsxs)("div",{className:"profile-card-glass",children:[(0,j.jsx)("div",{className:"profile-avatar-section",children:(0,j.jsx)("div",{className:"profile-avatar-new",children:a.photoURL&&!w?(0,j.jsx)("img",{src:a.photoURL,alt:"Profile",className:"avatar-image-new",referrerPolicy:"no-referrer",onError:()=>y(!0)}):(0,j.jsx)("div",{className:"avatar-placeholder-new",children:(a.displayName||a.email||"U").charAt(0).toUpperCase()})})}),(0,j.jsxs)("div",{className:"profile-info-section",children:[(0,j.jsx)("h1",{className:"profile-name-new",children:a.displayName||"Basho Member"}),(0,j.jsx)("p",{className:"profile-email-new",children:a.email}),(0,j.jsxs)("button",{onClick:async()=>{try{await m(),g("/")}catch(e){console.error("Failed to log out:",e)}},className:"logout-btn-new",children:[(0,j.jsx)(d.A,{size:18}),(0,j.jsx)("span",{children:"Sign Out"})]})]})]}),(0,j.jsxs)("div",{className:"section-container",children:[(0,j.jsx)("h2",{className:"section-title-profile",children:"Account Details"}),(0,j.jsxs)("div",{className:"profile-porcelain-card",children:[(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"detail-icon-new",children:(0,j.jsx)(t.A,{size:20})}),(0,j.jsxs)("div",{className:"detail-content-new",children:[(0,j.jsx)("span",{className:"detail-label-new",children:"Display Name"}),(0,j.jsx)("span",{className:"detail-value-new",children:a.displayName||"Not set"})]})]}),(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"detail-icon-new",children:(0,j.jsx)(o.A,{size:20})}),(0,j.jsxs)("div",{className:"detail-content-new",children:[(0,j.jsx)("span",{className:"detail-label-new",children:"Email Address"}),(0,j.jsx)("span",{className:"detail-value-new",children:a.email})]})]}),(0,j.jsxs)("div",{className:"detail-row",children:[(0,j.jsx)("div",{className:"detail-icon-new",children:(0,j.jsx)(h,{size:20})}),(0,j.jsxs)("div",{className:"detail-content-new",children:[(0,j.jsx)("span",{className:"detail-label-new",children:"Member Since"}),(0,j.jsx)("span",{className:"detail-value-new",children:A})]})]}),(0,j.jsxs)("div",{className:"detail-row last",children:[(0,j.jsx)("div",{className:"detail-icon-new",children:(0,j.jsx)(p.A,{size:20})}),(0,j.jsxs)("div",{className:"detail-content-new",children:[(0,j.jsx)("span",{className:"detail-label-new",children:"Last Sign In"}),(0,j.jsx)("span",{className:"detail-value-new",children:b})]})]})]})]}),(0,j.jsxs)("div",{className:"section-container",children:[(0,j.jsx)("h2",{className:"section-title-profile",children:"Order History"}),(0,j.jsx)("div",{className:"profile-porcelain-card",children:N?(0,j.jsxs)("div",{className:"orders-loading",children:[(0,j.jsx)("div",{className:"loading-spinner"}),(0,j.jsx)("span",{children:"Loading orders..."})]}):0===v.length?(0,j.jsxs)("div",{className:"orders-empty",children:[(0,j.jsx)(x,{size:48,strokeWidth:1.5}),(0,j.jsx)("h3",{children:"No Orders Yet"}),(0,j.jsx)("p",{children:"Your order history will appear here once you make a purchase."}),(0,j.jsxs)("button",{className:"browse-products-btn",onClick:()=>g("/products"),children:[(0,j.jsx)(u.A,{size:18}),(0,j.jsx)("span",{children:"Browse Products"})]})]}):(0,j.jsx)("div",{className:"orders-list",children:v.map(e=>{var s,a,i;return(0,j.jsxs)("div",{className:"order-card-wrapper",children:[(0,j.jsxs)("div",{className:"order-row ".concat(k===e.orderId?"expanded":""),onClick:()=>f(k===e.orderId?null:e.orderId),children:[(0,j.jsxs)("div",{className:"order-items-preview",children:[e.items.slice(0,3).map((e,s)=>(0,j.jsx)("div",{className:"order-item-thumb",style:{zIndex:3-s},children:e.image?(0,j.jsx)("img",{src:e.image,alt:e.name}):(0,j.jsx)("div",{className:"order-item-placeholder",children:(0,j.jsx)(x,{size:20})})},s)),e.items.length>3&&(0,j.jsxs)("div",{className:"order-items-more",children:["+",e.items.length-3]})]}),(0,j.jsxs)("div",{className:"order-info",children:[(0,j.jsx)("div",{className:"order-title",children:1===e.items.length?e.items[0].name:"".concat((null===(s=e.items[0])||void 0===s?void 0:s.name)||"Order"," + ").concat(e.items.length-1," more")}),(0,j.jsxs)("div",{className:"order-meta",children:[(0,j.jsxs)("span",{className:"order-number",children:["#",e.orderNumber]}),(0,j.jsx)("span",{className:"order-date",children:(i=e.createdAt,new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))}),(0,j.jsxs)("span",{className:"order-amount",children:["\u20b9",e.totalAmount.toLocaleString()]})]})]}),(0,j.jsx)("div",{className:"order-status ".concat(S(e.status)),children:e.status})]}),k===e.orderId&&(0,j.jsxs)("div",{className:"order-timeline-container",children:["cancelled"===(null===(a=e.status)||void 0===a?void 0:a.toLowerCase())?(0,j.jsxs)("div",{className:"order-cancelled-notice",children:[(0,j.jsx)("span",{className:"cancelled-icon",children:"\u26a0"}),(0,j.jsxs)("div",{children:[(0,j.jsx)("strong",{children:"Order Cancelled"}),(0,j.jsx)("p",{children:"This order has been cancelled."})]})]}):(0,j.jsx)("div",{className:"order-timeline",children:C(e.status).map((e,s,a)=>(0,j.jsxs)("div",{className:"timeline-step",children:[(0,j.jsx)("div",{className:"timeline-dot ".concat(e.isActive?"active":e.isCompleted?"completed":"pending"),children:(0,j.jsx)("span",{className:"timeline-icon",children:e.icon})}),(0,j.jsx)("div",{className:"timeline-label",children:e.label}),s<a.length-1&&(0,j.jsx)("div",{className:"timeline-line ".concat(e.isCompleted?"completed":"pending")})]},e.key))}),(0,j.jsxs)("div",{className:"order-details-expanded",children:[(0,j.jsxs)("div",{className:"order-detail-row",children:[(0,j.jsx)("span",{className:"detail-label",children:"Shipping Address:"}),(0,j.jsxs)("span",{className:"detail-value",children:[e.shippingAddress,", ",e.shippingCity,", ",e.shippingState," - ",e.shippingPincode]})]}),e.trackingNumber&&(0,j.jsxs)("div",{className:"order-detail-row",children:[(0,j.jsx)("span",{className:"detail-label",children:"Tracking Number:"}),(0,j.jsx)("span",{className:"detail-value tracking-number",children:e.trackingNumber})]}),(0,j.jsxs)("div",{className:"order-items-list",children:[(0,j.jsx)("h4",{children:"Items in this order:"}),e.items.map((e,s)=>(0,j.jsxs)("div",{className:"order-item-detail",children:[(0,j.jsx)("span",{className:"item-name",children:e.name}),(0,j.jsxs)("span",{className:"item-qty",children:["x",e.quantity]}),(0,j.jsxs)("span",{className:"item-price",children:["\u20b9",e.price]})]},s))]})]})]})]},e.orderId)})})})]}),(0,j.jsxs)("div",{className:"section-container",children:[(0,j.jsx)("h2",{className:"section-title-profile",children:"Quick Actions"}),(0,j.jsxs)("div",{className:"quick-actions-grid",children:[(0,j.jsxs)("button",{className:"quick-action-card",onClick:()=>g("/products"),children:[(0,j.jsx)(u.A,{size:24}),(0,j.jsx)("span",{children:"Browse Collections"})]}),(0,j.jsxs)("button",{className:"quick-action-card",onClick:()=>g("/workshops"),children:[(0,j.jsx)(h,{size:24}),(0,j.jsx)("span",{children:"View Workshops"})]})]})]})]})})}},5088(e,s,a){a.d(s,{A:()=>i});const i=(0,a(7784).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},7095(e,s,a){a.d(s,{A:()=>i});const i=(0,a(7784).A)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]])}}]);
//# sourceMappingURL=924.d9c9f75c.chunk.js.map