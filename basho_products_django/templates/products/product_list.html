{% extends 'products/base.html' %}
{% load static %}

{% block title %}Collections | Basho Pottery{% endblock %}

{% block content %}
<section class="page-header">
    <div class="container">
        <h1 class="page-title">
            <span class="japanese-accent">é™¶å™¨</span>
            <span class="main-title">Our Collections</span>
        </h1>
        <p class="page-subtitle">Handcrafted pottery for mindful living</p>
    </div>
</section>

<!-- Filter Bar -->
<section class="section-padding" style="padding-top: var(--spacing-md);">
    <div class="container">
        <div class="filter-bar">
            <div class="filter-group">
                <label>Category:</label>
                <select id="categoryFilter" onchange="window.location.href='?category=' + this.value + '&sort={{ sort_by }}'">
                    <option value="all" {% if category == 'all' %}selected{% endif %}>All Collections</option>
                    <option value="tableware" {% if category == 'tableware' %}selected{% endif %}>Tableware</option>
                    <option value="art" {% if category == 'art' %}selected{% endif %}>Art Pieces</option>
                    <option value="custom" {% if category == 'custom' %}selected{% endif %}>Custom Orders</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Sort by:</label>
                <select id="sortFilter" onchange="window.location.href='?category={{ category }}&sort=' + this.value">
                    <option value="featured" {% if sort_by == 'featured' %}selected{% endif %}>Featured</option>
                    <option value="price-low" {% if sort_by == 'price-low' %}selected{% endif %}>Price: Low to High</option>
                    <option value="price-high" {% if sort_by == 'price-high' %}selected{% endif %}>Price: High to Low</option>
                    <option value="newest" {% if sort_by == 'newest' %}selected{% endif %}>Newest</option>
                </select>
            </div>
        </div>
    </div>
</section>

<!-- Products Grid -->
<section class="section-padding">
    <div class="container">
        <div class="product-grid">
            {% for product in products %}
            <div class="product-card fade-in" data-category="{{ product.category }}" data-price="{{ product.price }}">
                <div class="product-image">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="placeholder-img">
                    {% elif product.image_url %}
                        <img src="{{ product.image_url }}" alt="{{ product.name }}" class="placeholder-img">
                    {% else %}
                        <img src="{% static 'images/products/placeholder.jpg' %}" alt="{{ product.name }}" class="placeholder-img">
                    {% endif %}
                    {% if product.is_bestseller %}
                        <span class="product-badge">Bestseller</span>
                    {% elif product.is_featured %}
                        <span class="product-badge">Featured</span>
                    {% endif %}
                </div>
                <div class="product-info">
                    <h3 class="product-name">{{ product.name }}</h3>
                    <div class="product-meta">
                        {% for tag in product.get_tags %}
                            <span class="meta-tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                    <p class="product-description">{{ product.short_description|default:product.description|truncatewords:20 }}</p>
                    <div class="product-details">
                        <span class="product-price">â‚¹{{ product.price|floatformat:0 }}</span>
                        <div class="product-actions">
                            <button class="btn-icon" onclick="basho.addToCart('{{ product.product_id }}', '{{ product.name }}', {{ product.price }})" title="Add to Cart">ðŸ›’</button>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <p style="text-align: center; width: 100%; padding: var(--spacing-xl);">No products found in this category.</p>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Custom Orders Section -->
<section class="section-padding" id="custom" style="background: var(--cream);">
    <div class="container">
        <div class="section-header center">
            <h2 class="section-title">
                <span class="title-accent">Custom</span>
                <span class="title-main">Creations</span>
            </h2>
            <p class="section-subtitle">Bespoke pottery crafted to your vision</p>
        </div>

        <div class="custom-intro" style="max-width: 800px; margin: 0 auto var(--spacing-lg);">
            <p class="large-text">Have a specific vision? We create custom pottery pieces tailored to your needsâ€”from personalized dinnerware to unique art installations.</p>
            
            <div class="info-box">
                <h4>What We Offer</h4>
                <ul style="list-style: none; padding: 0;">
                    <li>âœ“ Custom tableware sets for homes and restaurants</li>
                    <li>âœ“ Personalized gifts with names or messages</li>
                    <li>âœ“ Corporate branding on pottery</li>
                    <li>âœ“ Large-scale art installations</li>
                    <li>âœ“ Wedding and event pottery</li>
                </ul>
            </div>
        </div>

        <div class="form-container">
            <form id="customOrderForm" class="fade-in">
                {% csrf_token %}
                <h3 style="margin-bottom: var(--spacing-md); text-align: center;">Request a Custom Order</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Your Name *</label>
                        <input type="text" name="name" required placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" name="email" required placeholder="your@email.com">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Phone Number *</label>
                        <input type="tel" name="phone" required placeholder="+91 XXXXX XXXXX">
                    </div>
                    <div class="form-group">
                        <label>Project Type *</label>
                        <select name="projectType" required>
                            <option value="">Select type</option>
                            <option value="tableware">Tableware Set</option>
                            <option value="art">Art Piece</option>
                            <option value="corporate">Corporate Order</option>
                            <option value="event">Event/Wedding</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Describe Your Vision *</label>
                    <textarea name="description" required placeholder="Tell us about your custom pottery idea, including size, colors, quantity, and any specific requirements..."></textarea>
                    <span class="form-helper">Be as detailed as possible</span>
                </div>

                <div class="form-group">
                    <label>Budget Range (Optional)</label>
                    <select name="budget">
                        <option value="">Select range</option>
                        <option value="5000-10000">â‚¹5,000 - â‚¹10,000</option>
                        <option value="10000-25000">â‚¹10,000 - â‚¹25,000</option>
                        <option value="25000-50000">â‚¹25,000 - â‚¹50,000</option>
                        <option value="50000+">â‚¹50,000+</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>GST Number (Optional - for invoice)</label>
                    <input type="text" name="gst" placeholder="Enter GST number if applicable">
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">Submit Custom Order Request</button>
            </form>
        </div>
    </div>
</section>

<!-- Product Care -->
<section class="section-padding">
    <div class="container">
        <div class="section-header center">
            <h2 class="section-title">
                <span class="title-accent">Product Care &</span>
                <span class="title-main">Information</span>
            </h2>
        </div>

        <div class="content-grid">
            <div class="fade-in">
                <h3>Material & Safety</h3>
                <ul>
                    <li><strong>Clay:</strong> High-quality stoneware fired at 1200Â°C</li>
                    <li><strong>Glazes:</strong> Food-safe, lead-free glazes</li>
                    <li><strong>Certifications:</strong> Food-safe and non-toxic</li>
                    <li><strong>Usage:</strong> Microwave and dishwasher safe (unless specified)</li>
                </ul>
            </div>

            <div class="fade-in">
                <h3>Care Instructions</h3>
                <ul>
                    <li>Hand wash recommended for longevity</li>
                    <li>Avoid thermal shock (sudden temperature changes)</li>
                    <li>Do not place directly from refrigerator to oven</li>
                    <li>Minor surface variations are natural and intentional</li>
                </ul>
            </div>

            <div class="fade-in">
                <h3>Shipping Information</h3>
                <ul>
                    <li><strong>Packaging:</strong> Eco-friendly, secure packaging</li>
                    <li><strong>Shipping:</strong> Calculated by weight (â‚¹50/kg)</li>
                    <li><strong>Delivery:</strong> 5-7 business days within India</li>
                    <li><strong>Custom Orders:</strong> 3-4 weeks production time</li>
                </ul>
            </div>

            <div class="fade-in">
                <h3>Returns & Exchange</h3>
                <ul>
                    <li>Damaged items: Full refund or replacement</li>
                    <li>Report damage within 48 hours of delivery</li>
                    <li>Custom orders: Non-refundable once production starts</li>
                    <li>Contact us for any concerns</li>
                </ul>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/products.js' %}"></script>
{% endblock %}
